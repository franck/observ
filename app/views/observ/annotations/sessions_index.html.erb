<div class="observ-container">
  <div class="observ-page__header">
    <h1 class="observ-page__title">Annotations</h1>
  </div>

  <div class="observ-tabs">
    <%= link_to "Sessions", sessions_annotations_path, class: "observ-tab observ-tab--active" %>
    <%= link_to "Traces", traces_annotations_path, class: "observ-tab" %>
  </div>

  <div class="observ-card">
    <div class="observ-card__header">
      <h2 class="observ-card__title">All Annotations (<%= @annotations.count %>)</h2>
      <div class="observ-card__actions">
        <%= link_to "Export CSV", export_annotations_path(type: "sessions", format: :csv), class: "observ-button observ-button--secondary" %>
      </div>
    </div>

    <div class="observ-card__body">
      <% if @annotations.any? %>
        <div class="observ-annotations-list">
          <% @annotations.each do |annotation| %>
            <div id="annotation_<%= annotation.id %>" class="observ-annotation">
              <div class="observ-annotation__header">
                <span class="observ-annotation__meta">
                  Session: <%= link_to annotation.annotatable.id, session_path(annotation.annotatable), class: "observ-link" %>
                  Â· <%= observ_relative_time(annotation.created_at) %>
                </span>
                <%= button_to "Delete", 
                    session_annotation_path(annotation.annotatable.id, annotation),
                    method: :delete,
                    class: "observ-annotation__delete",
                    data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
              </div>
              <div class="observ-annotation__content"><%= annotation.content %></div>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="observ-empty-state">
          <p class="observ-empty-state__text">No annotations for sessions yet.</p>
        </div>
      <% end %>
    </div>
  </div>

  <%= observ_pagination(@annotations) %>
</div>
