<%# Simple line-by-line diff highlighting %>
<%
  lines = content.split("\n")
  removed = diff[:removed] || []
  added = diff[:added] || []
%>

<% lines.each do |line| %>
  <% if side == :from && removed.include?(line) %>
    <div style="background-color: #fee2e2; color: #991b1b; margin: 0 -1rem; padding: 0 1rem;"><%= line.presence || " " %></div>
  <% elsif side == :to && added.include?(line) %>
    <div style="background-color: #dcfce7; color: #166534; margin: 0 -1rem; padding: 0 1rem;"><%= line.presence || " " %></div>
  <% else %>
    <div><%= line.presence || " " %></div>
  <% end %>
<% end %>
